<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>(NERDY)Friend Finder</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="../../styles/styles.css"> 


  
</head>
<body>

<div class="container" id="survey">
    <h1>Survey Questions:</h1>
    <hr>
    <form>
                <div class="form-group">
                  <label for="name"><h3>Name (required)</h3></label>
                  <input type="text" class="form-control" id="name" placeholder="" required>
                </div>
                <div class="form-group">
                        <label for="picture"><h3>Link to YOUR picture (required)</h3></label>
                        <input type="text" class="form-control" id="picture" placeholder="" required>
                      </div>  
                <hr>            
                <div class="form-group">
                  <label for="survey"><h5>Marvel is better than DC</h5></label>
                  <select required class="form-control" id="q1">
                    <option value="X">Select an option</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                  </select>
                </div>
                <div class="form-group">
                        <label for="survey"><h5>Batman could beat Superman</h5></label>
                        <select required class="form-control" id="q2">
                          <option value="X">Select an option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                          <option value="2">2</option>
                          <option value="3">3</option>
                          <option value="4">4</option>
                          <option value="5">5 (Strongly Agree)</option>
                        </select>
                </div>
                <div class="form-group">
                  <label for="survey"><h5>Warlock is the most underrated D&D class</h5></label>
                  <select required class="form-control" id="q3">
                    <option value="X">Select an option</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="survey"><h5>Bard is the worst D&D class EVER</h5></label>
                  <select required class="form-control" id="q4">
                    <option value="X">Select an option</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                  </select>
                </div>
                <div class="form-group">
                        <label for="survey"><h5>Star Wars is better than Star Trek</h5> </label>
                        <select required class="form-control" id="q5">
                          <option value="X">Select an option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                          <option value="2">2</option>
                          <option value="3">3</option>
                          <option value="4">4</option>
                          <option value="5">5 (Strongly Agree)</option>
                        </select>
                </div>
                <div class="form-group">
                  <label for="survey"><h5>Fantasy is better than Sci-Fi</h5></label>
                  <select required class="form-control" id="q6">
                    <option value="X">Select an option</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="survey"><h5>Console games are better than PC games</h5></label>
                  <select required class="form-control" id="q7">
                    <option value="X">Select an option</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                  </select>
                </div>
                <div class="form-group">
                        <label for="survey"><h5>Magneto was right</h5></label>
                        <select required class="form-control" id="q8">
                          <option value="X">Select an option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                          <option value="2">2</option>
                          <option value="3">3</option>
                          <option value="4">4</option>
                          <option value="5">5 (Strongly Agree)</option>
                        </select>
                </div>
                <div class="form-group">
                  <label for="survey"><h5>I like going to Cons</h5></label>
                  <select required class="form-control" id="q9">
                    <option value="X">Select an option</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                  </select>
                </div>
                <div class="form-group">
                        <label for="survey"><h5>Fandoms are family</h5></label>
                        <select required class="form-control" id="q10">
                          <option value="X">Select an option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                          <option value="2">2</option>
                          <option value="3">3</option>
                          <option value="4">4</option>
                          <option value="5">5 (Strongly Agree)</option>
                        </select>
                </div>                
            <button type="submit" id="submitBtn" class="btn btn-primary btn-lg btn-block" data-toggle="modal" data-target="#exampleModal">Submit</button>
    </form>
    <p>
        <a href="/api/friends" target="blank">API Friends List</a> | <a href="https://github.com/ctracey92/friend-finder" target="blank">GitHub Repo</a>
    </p>
</div>
        

<div id="myModal" class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">New Friend!</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
            </div>
            <div class="modal-body">
                <p id="newFriend"></p>
                <img id="newFriendImage" src="" alt="New Friend" height="150" width="150">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>    

<script src="https://code.jquery.com/jquery.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
<script type="text/javascript">
$("#submitBtn").on("click",function(){
    event.preventDefault();
        var scores =[
            $("#q1").val(),
            $("#q2").val(),
            $("#q3").val(),
            $("#q4").val(),
            $("#q5").val(),
            $("#q6").val(),
            $("#q7").val(),
            $("#q8").val(),
            $("#q9").val(),
            $("#q10").val(),
        ] 
        var name = $("#name").val().trim();
        var photo = $("#picture").val().trim();
        function validation(){
            for (var i = 0; i<scores.length; i++){
             var filledOut = true;
            if(scores[i] === "X" || name === "" || photo === ""){
                filledOut = false;
            }
            } 
            return filledOut
        }
   
    if (validation()){
        var dataGrabbed = {
        name: name,
        photo: photo,
        scores: scores
    }
    $("form").trigger("reset");


    $.post("/api/friends",dataGrabbed, function(data){
        console.log(data)
        $("#newFriend").text("Your new friend is: " + data.name)
        $("#newFriendImage").attr("src",data.photo)
    })

    $('#myModal').modal("show");
    }
    else{
        alert("Please fill out the form completely")   
    }
    



});
</script>

</body>
</html>